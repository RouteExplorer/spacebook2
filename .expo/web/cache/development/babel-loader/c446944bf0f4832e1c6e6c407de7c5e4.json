{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport { Camera } from \"expo-camera\";\nimport Style from \"./Style\";\nimport UploadDrafts from \"./UploadDraft\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Settings = function (_Component) {\n  _inherits(Settings, _Component);\n\n  var _super = _createSuper(Settings);\n\n  function Settings(props) {\n    var _this;\n\n    _classCallCheck(this, Settings);\n\n    _this = _super.call(this, props);\n\n    _this.checkLoggedIn = function _callee() {\n      var value;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@session_token\"));\n\n            case 2:\n              value = _context.sent;\n              console.log(value);\n\n              if (value == null) {\n                _this.props.navigation.navigate(\"Login\");\n              }\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.logout = function _callee2() {\n      var token;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@session_token\"));\n\n            case 2:\n              token = _context2.sent;\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"@session_token\"));\n\n            case 5:\n              _context2.next = 7;\n              return _regeneratorRuntime.awrap(AsyncStorage.removeItem(\"@id\"));\n\n            case 7:\n              return _context2.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/logout\", {\n                method: \"POST\",\n                headers: {\n                  \"X-Authorization\": token\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  _this.props.navigation.navigate(\"Login\");\n                } else if (response.status === 401) {\n                  _this.setState({\n                    TextError: \"Failed To Logout\"\n                  });\n                } else {\n                  throw \"Something went wrong\";\n                }\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 8:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.GetUser = function _callee3() {\n      var value, id;\n      return _regeneratorRuntime.async(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _context3.next = 2;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@session_token\"));\n\n            case 2:\n              value = _context3.sent;\n              _context3.next = 5;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@id\"));\n\n            case 5:\n              id = _context3.sent;\n              return _context3.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\n                headers: {\n                  \"X-Authorization\": value\n                }\n              }).then(function (response) {\n                if (response.status === 200) {\n                  return response.json();\n                } else if (response.status === 401) {\n                  return response.json();\n                } else {\n                  throw \"Something went wrong\";\n                }\n              }).then(function (responseJson) {\n                _this.setState({\n                  first_name: responseJson.first_name,\n                  last_name: responseJson.last_name,\n                  email: responseJson.email,\n                  isLoading: false\n                });\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.updateItem = function _callee4() {\n      var reg, regBool, value, id;\n      return _regeneratorRuntime.async(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!(_this.state.first_name == \"\" || _this.state.last_name == \"\" || _this.state.email == \"\")) {\n                _context4.next = 2;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", _this.setState({\n                TextError: \"Error Bad / Missing Data\"\n              }));\n\n            case 2:\n              reg = new RegExp(\"[a-z0-9]+@[a-z]+\\.[a-z]{2,3}\");\n              regBool = reg.test(_this.state.email);\n\n              if (!(regBool == false)) {\n                _context4.next = 6;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", _this.setState({\n                TextError: \"Bad Email Address\"\n              }));\n\n            case 6:\n              _context4.next = 8;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@session_token\"));\n\n            case 8:\n              value = _context4.sent;\n              _context4.next = 11;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"@id\"));\n\n            case 11:\n              id = _context4.sent;\n\n              if (!(_this.state.password == \"\")) {\n                _context4.next = 16;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\n                method: \"PATCH\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"X-Authorization\": value\n                },\n                body: JSON.stringify({\n                  first_name: _this.state.first_name,\n                  last_name: _this.state.last_name,\n                  email: _this.state.email\n                })\n              }).then(function (response) {\n                if (response.status === 200) {\n                  _this.setState({\n                    TextError: \"Information Sucessfully Updated\"\n                  });\n                } else if (response.status === 403) {\n                  _this.setState({\n                    TextError: \"Error Bad / Missing Data\"\n                  });\n                } else if (response.status == 400) {\n                  _this.setState({\n                    TextError: \"Error Bad / Missing Data\"\n                  });\n                } else {\n                  throw \"Something went wrong\";\n                }\n              }).then(function (responseJson) {\n                console.log(responseJson);\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 16:\n              if (!(_this.state.password != \"\")) {\n                _context4.next = 19;\n                break;\n              }\n\n              if (!(_this.state.password.length < 5)) {\n                _context4.next = 19;\n                break;\n              }\n\n              return _context4.abrupt(\"return\", _this.setState({\n                TextError: \"Password Must Be More Than 5 Characters\"\n              }));\n\n            case 19:\n              return _context4.abrupt(\"return\", fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\n                method: \"PATCH\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  \"X-Authorization\": value\n                },\n                body: JSON.stringify({\n                  first_name: _this.state.first_name,\n                  last_name: _this.state.last_name,\n                  email: _this.state.email,\n                  password: _this.state.password\n                })\n              }).then(function (response) {\n                if (response.status === 200) {\n                  _this.setState({\n                    TextError: \"Information Sucessfully Updated\"\n                  });\n                } else if (response.status === 403) {\n                  _this.setState({\n                    TextError: \"Error Bad / Missing Data\"\n                  });\n                } else if (response.status == 400) {\n                  _this.setState({\n                    TextError: \"Error Bad / Missing Data\"\n                  });\n                } else {\n                  throw \"Something went wrong\";\n                }\n              }).then(function (responseJson) {\n                console.log(responseJson);\n              }).catch(function (error) {\n                console.log(error);\n              }));\n\n            case 20:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.state = {\n      first_name: \"\",\n      last_name: \"\",\n      email: \"\",\n      password: \"\",\n      id: \"\",\n      isLoading: true,\n      TextError: \"Please Fill In All Blank Fields\"\n    };\n    return _this;\n  }\n\n  _createClass(Settings, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      return _regeneratorRuntime.async(function componentDidMount$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              this.unsubscribe = this.props.navigation.addListener(\"focus\", function () {\n                _this2.checkLoggedIn();\n\n                UploadDrafts.dateCheck();\n\n                _this2.GetUser();\n              });\n\n            case 1:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unsubscribe();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      if (this.state.isLoading) {\n        return _jsx(View, {\n          style: {\n            flex: 1,\n            flexDirection: \"column\",\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          },\n          children: _jsx(Text, {\n            children: \"Loading..\"\n          })\n        });\n      } else {\n        return _jsxs(ScrollView, {\n          children: [_jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this3.logout();\n            },\n            style: Style.buttonStyleDefault,\n            children: _jsx(Text, {\n              style: Style.buttonText,\n              children: \"Logout\"\n            })\n          }), _jsx(TextInput, {\n            placeholder: \"Enter your first name...\",\n            onChangeText: function onChangeText(first_name) {\n              return _this3.setState({\n                first_name: first_name\n              });\n            },\n            value: this.state.first_name,\n            style: Style.inputBox\n          }), _jsx(TextInput, {\n            placeholder: \"Enter your last name...\",\n            onChangeText: function onChangeText(last_name) {\n              return _this3.setState({\n                last_name: last_name\n              });\n            },\n            value: this.state.last_name,\n            style: Style.inputBox\n          }), _jsx(TextInput, {\n            placeholder: \"Enter your email...\",\n            onChangeText: function onChangeText(email) {\n              return _this3.setState({\n                email: email\n              });\n            },\n            value: this.state.email,\n            style: Style.inputBox\n          }), _jsx(TextInput, {\n            placeholder: \"Enter your password...\",\n            onChangeText: function onChangeText(password) {\n              return _this3.setState({\n                password: password\n              });\n            },\n            value: this.state.password,\n            secureTextEntry: true,\n            style: Style.inputBox\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this3.updateItem();\n            },\n            style: Style.buttonStyleDefault,\n            children: _jsx(Text, {\n              style: Style.buttonText,\n              children: \"Update Information\"\n            })\n          }), _jsx(TouchableOpacity, {\n            onPress: function onPress() {\n              return _this3.props.navigation.navigate(\"UploadPhoto\");\n            },\n            style: Style.buttonStyleDefault,\n            children: _jsx(Text, {\n              style: Style.buttonText,\n              children: \"Upload Photo\"\n            })\n          }), _jsx(Text, {\n            style: Style.errorText,\n            children: this.state.TextError\n          })]\n        });\n      }\n    }\n  }]);\n\n  return Settings;\n}(Component);\n\nexport default Settings;","map":{"version":3,"sources":["C:/Users/Ruman/Documents/GitHub/spacebook2/components/Settings.js"],"names":["React","Component","AsyncStorage","Camera","Style","UploadDrafts","Settings","props","checkLoggedIn","getItem","value","console","log","navigation","navigate","logout","token","removeItem","fetch","method","headers","then","response","status","setState","TextError","catch","error","GetUser","id","json","responseJson","first_name","last_name","email","isLoading","updateItem","state","reg","RegExp","regBool","test","password","body","JSON","stringify","length","unsubscribe","addListener","dateCheck","flex","flexDirection","justifyContent","alignItems","buttonStyleDefault","buttonText","inputBox","errorText"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport { View,Text,FlatList,ScrollView,TextInput,TouchableOpacity } from \"react-native\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport { Camera } from \"expo-camera\";\r\nimport Style from \"./Style\";\r\nimport UploadDrafts from \"./UploadDraft\";\r\n\r\nclass Settings extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      first_name: \"\",\r\n      last_name: \"\",\r\n      email: \"\",\r\n      password: \"\",\r\n      id: \"\",\r\n      isLoading: true,\r\n      TextError: \"Please Fill In All Blank Fields\",\r\n    };\r\n  }\r\n  async componentDidMount() {\r\n    this.unsubscribe = this.props.navigation.addListener(\"focus\", () => {\r\n      this.checkLoggedIn();\r\n      UploadDrafts.dateCheck();\r\n      this.GetUser();\r\n    });\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.unsubscribe();\r\n  }\r\n\r\n  checkLoggedIn = async () => {\r\n    const value = await AsyncStorage.getItem(\"@session_token\");\r\n    console.log(value);\r\n\r\n    if (value == null) {\r\n      this.props.navigation.navigate(\"Login\");\r\n    }\r\n  };\r\n  logout = async () => {\r\n    let token = await AsyncStorage.getItem(\"@session_token\");\r\n\r\n    await AsyncStorage.removeItem(\"@session_token\");\r\n    await AsyncStorage.removeItem(\"@id\");\r\n\r\n    return fetch(\"http://localhost:3333/api/1.0.0/logout\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"X-Authorization\": token,\r\n      },\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          this.props.navigation.navigate(\"Login\");\r\n        } else if (response.status === 401) {\r\n          this.setState({ TextError: \"Failed To Logout\" });\r\n        } else {\r\n          throw \"Something went wrong\";\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  GetUser = async () => {\r\n    const value = await AsyncStorage.getItem(\"@session_token\");\r\n\r\n    const id = await AsyncStorage.getItem(\"@id\");\r\n\r\n    return fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\r\n      headers: { \"X-Authorization\": value },\r\n    })\r\n      .then((response) => {\r\n        if (response.status === 200) {\r\n          return response.json();\r\n        } else if (response.status === 401) {\r\n          return response.json();\r\n        } else {\r\n          throw \"Something went wrong\";\r\n        }\r\n      })\r\n      .then((responseJson) => {\r\n        this.setState({\r\n          first_name: responseJson.first_name,\r\n          last_name: responseJson.last_name,\r\n          email: responseJson.email,\r\n          isLoading: false,\r\n        });\r\n      })\r\n\r\n      .catch((error) => {\r\n        console.log(error);\r\n      });\r\n  };\r\n  updateItem = async () => {\r\n    \r\n    if (this.state.first_name == \"\" ||  this.state.last_name == \"\" ||this.state.email == \"\" )\r\n    {\r\n      return this.setState({ TextError: \"Error Bad / Missing Data\" });\r\n    }\r\n\r\n    const reg = new RegExp(\"[a-z0-9]+@[a-z]+\\.[a-z]{2,3}\");\r\n    \r\n    let regBool = reg.test(this.state.email);\r\n\r\n    if(regBool == false)\r\n    {\r\n      return this.setState({ TextError: \"Bad Email Address\" });\r\n    }\r\n   \r\n    \r\n    \r\n    const value = await AsyncStorage.getItem(\"@session_token\");\r\n    const id = await AsyncStorage.getItem(\"@id\");\r\n\r\n    if (this.state.password == \"\") {\r\n      \r\n      return fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"X-Authorization\": value,\r\n        },\r\n        body: JSON.stringify({\r\n          first_name: this.state.first_name,\r\n          last_name: this.state.last_name,\r\n          email: this.state.email,\r\n        }),\r\n      })\r\n        .then((response) => {\r\n          if (response.status === 200) {\r\n            this.setState({ TextError: \"Information Sucessfully Updated\" });\r\n          } else if (response.status === 403) {\r\n            this.setState({ TextError: \"Error Bad / Missing Data\" });\r\n          } else if (response.status == 400){\r\n            this.setState({ TextError: \"Error Bad / Missing Data\" });\r\n          }else {\r\n            throw \"Something went wrong\";\r\n          }\r\n        })\r\n        .then((responseJson) => {\r\n          console.log(responseJson);\r\n        })\r\n\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n    } else if (this.state.password != \"\")\r\n      if(this.state.password.length < 5)\r\n      {return this.setState({ TextError: \"Password Must Be More Than 5 Characters\" });}\r\n\r\n      return fetch(\"http://localhost:3333/api/1.0.0/user/\" + id, {\r\n        method: \"PATCH\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n          \"X-Authorization\": value,\r\n        },\r\n        body: JSON.stringify({\r\n          first_name: this.state.first_name,\r\n          last_name: this.state.last_name,\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n        }),\r\n      })\r\n        .then((response) => {\r\n          if (response.status === 200) {\r\n            this.setState({ TextError: \"Information Sucessfully Updated\" });\r\n          } else if (response.status === 403) {\r\n            this.setState({ TextError: \"Error Bad / Missing Data\" });\r\n          } else if (response.status == 400){\r\n            this.setState({ TextError: \"Error Bad / Missing Data\" });\r\n          } else {\r\n            throw \"Something went wrong\";\r\n          }\r\n        })\r\n        .then((responseJson) => {\r\n          console.log(responseJson);\r\n        })\r\n\r\n        .catch((error) => {\r\n          console.log(error);\r\n        });\r\n  };\r\n  render() {\r\n    if (this.state.isLoading) {\r\n      return (\r\n        <View\r\n          style={{\r\n            flex: 1,\r\n            flexDirection: \"column\",\r\n            justifyContent: \"center\",\r\n            alignItems: \"center\",\r\n          }}\r\n        >\r\n          <Text>Loading..</Text>\r\n        </View>\r\n      );\r\n    } else {\r\n      return (\r\n        <ScrollView>\r\n          <TouchableOpacity\r\n            onPress={() => this.logout()}\r\n            style={Style.buttonStyleDefault}\r\n          >\r\n            <Text style={Style.buttonText}>Logout</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TextInput\r\n            placeholder=\"Enter your first name...\"\r\n            onChangeText={(first_name) => this.setState({ first_name })}\r\n            value={this.state.first_name}\r\n            style={Style.inputBox}\r\n          />\r\n          <TextInput\r\n            placeholder=\"Enter your last name...\"\r\n            onChangeText={(last_name) => this.setState({ last_name })}\r\n            value={this.state.last_name}\r\n            style={Style.inputBox}\r\n          />\r\n          <TextInput\r\n            placeholder=\"Enter your email...\"\r\n            onChangeText={(email) => this.setState({ email })}\r\n            value={this.state.email}\r\n            style={Style.inputBox}\r\n          />\r\n          <TextInput\r\n            placeholder=\"Enter your password...\"\r\n            onChangeText={(password) => this.setState({ password })}\r\n            value={this.state.password}\r\n            secureTextEntry\r\n            style={Style.inputBox}\r\n          />\r\n          <TouchableOpacity\r\n            onPress={() => this.updateItem()}\r\n            style={Style.buttonStyleDefault}\r\n          >\r\n            <Text style={Style.buttonText}>Update Information</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            onPress={() => this.props.navigation.navigate(\"UploadPhoto\")}\r\n            style={Style.buttonStyleDefault}\r\n          >\r\n            <Text style={Style.buttonText}>Upload Photo</Text>\r\n          </TouchableOpacity>\r\n\r\n          <Text style={Style.errorText}>{this.state.TextError}</Text>\r\n        </ScrollView>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Settings;\r\n"]},"metadata":{},"sourceType":"module"}